{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import BookForm from'../components/BookForm';import BookCard from'../components/BookCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MyBooks(){const[books,setBooks]=useState([]);const user=JSON.parse(localStorage.getItem('user'));const fetchBooks=async()=>{try{const res=await axios.get('http://localhost:5000/api/books/my-books',{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});setBooks(res.data);}catch(error){console.error('Error fetching books:',error);}};useEffect(()=>{fetchBooks();},[]);const handleDelete=async bookId=>{try{await axios.delete(\"http://localhost:5000/api/books/\".concat(bookId),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});fetchBooks();}catch(error){console.error('Error deleting book:',error);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Books\"}),/*#__PURE__*/_jsx(BookForm,{onBookAdded:fetchBooks}),/*#__PURE__*/_jsx(\"div\",{className:\"book-grid\",children:books.map(book=>/*#__PURE__*/_jsx(BookCard,{book:book,user:user,onDelete:handleDelete},book._id))})]});}export default MyBooks;","map":{"version":3,"names":["React","useState","useEffect","axios","BookForm","BookCard","jsx","_jsx","jsxs","_jsxs","MyBooks","books","setBooks","user","JSON","parse","localStorage","getItem","fetchBooks","res","get","headers","Authorization","concat","data","error","console","handleDelete","bookId","delete","children","onBookAdded","className","map","book","onDelete","_id"],"sources":["D:/book-swap/client/src/pages/MyBooks.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport BookForm from '../components/BookForm';\r\nimport BookCard from '../components/BookCard';\r\n\r\nfunction MyBooks() {\r\n  const [books, setBooks] = useState([]);\r\n  const user = JSON.parse(localStorage.getItem('user'));\r\n\r\n  const fetchBooks = async () => {\r\n    try {\r\n      const res = await axios.get('http://localhost:5000/api/books/my-books', {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n      });\r\n      setBooks(res.data);\r\n    } catch (error) {\r\n      console.error('Error fetching books:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchBooks();\r\n  }, []);\r\n\r\n  const handleDelete = async (bookId) => {\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/books/${bookId}`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n      });\r\n      fetchBooks();\r\n    } catch (error) {\r\n      console.error('Error deleting book:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>My Books</h1>\r\n      <BookForm onBookAdded={fetchBooks} />\r\n      <div className=\"book-grid\">\r\n        {books.map(book => (\r\n          <BookCard key={book._id} book={book} user={user} onDelete={handleDelete} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MyBooks;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAC7C,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9C,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACjB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAY,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAErD,KAAM,CAAAC,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAhB,KAAK,CAACiB,GAAG,CAAC,0CAA0C,CAAE,CACtEC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYP,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAG,CACtE,CAAC,CAAC,CACFL,QAAQ,CAACO,GAAG,CAACK,IAAI,CAAC,CACpB,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC/C,CACF,CAAC,CAEDvB,SAAS,CAAC,IAAM,CACdgB,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAS,YAAY,CAAG,KAAO,CAAAC,MAAM,EAAK,CACrC,GAAI,CACF,KAAM,CAAAzB,KAAK,CAAC0B,MAAM,oCAAAN,MAAA,CAAoCK,MAAM,EAAI,CAC9DP,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYP,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAG,CACtE,CAAC,CAAC,CACFC,UAAU,CAAC,CAAC,CACd,CAAE,MAAOO,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CACF,CAAC,CAED,mBACEhB,KAAA,QAAAqB,QAAA,eACEvB,IAAA,OAAAuB,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBvB,IAAA,CAACH,QAAQ,EAAC2B,WAAW,CAAEb,UAAW,CAAE,CAAC,cACrCX,IAAA,QAAKyB,SAAS,CAAC,WAAW,CAAAF,QAAA,CACvBnB,KAAK,CAACsB,GAAG,CAACC,IAAI,eACb3B,IAAA,CAACF,QAAQ,EAAgB6B,IAAI,CAAEA,IAAK,CAACrB,IAAI,CAAEA,IAAK,CAACsB,QAAQ,CAAER,YAAa,EAAzDO,IAAI,CAACE,GAAsD,CAC3E,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAA1B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}