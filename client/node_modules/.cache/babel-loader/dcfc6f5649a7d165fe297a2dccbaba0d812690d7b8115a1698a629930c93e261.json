{"ast":null,"code":"import React from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BookCard(_ref){let{book,user,onRequest,onDelete}=_ref;const navigate=useNavigate();const handleRequest=async()=>{if(!user){alert('Please log in to request a book.');navigate('/login');return;}try{await axios.post('http://localhost:5000/api/requests',{bookId:book._id},{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});onRequest();}catch(error){console.error('Error creating request:',error);alert('Failed to request book. Please try again.');}};const handleDelete=()=>{if(!user){alert('Please log in to delete a book.');navigate('/login');return;}onDelete(book._id);};return/*#__PURE__*/_jsxs(\"div\",{className:\"book-card\",children:[book.image&&/*#__PURE__*/_jsx(\"img\",{src:book.image,alt:book.title}),/*#__PURE__*/_jsx(\"h3\",{children:book.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Author: \",book.author]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Condition: \",book.condition]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Posted by: \",book.user.username]}),user&&user.id!==book.user._id&&/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:handleRequest,children:\"Request Book\"}),user&&user.id===book.user._id&&/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:handleDelete,children:\"Delete\"})]});}export default BookCard;","map":{"version":3,"names":["React","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","BookCard","_ref","book","user","onRequest","onDelete","navigate","handleRequest","alert","post","bookId","_id","headers","Authorization","concat","localStorage","getItem","error","console","handleDelete","className","children","image","src","alt","title","author","condition","username","id","onClick"],"sources":["D:/book-swap/client/src/components/BookCard.js"],"sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction BookCard({ book, user, onRequest, onDelete }) {\r\n  const navigate = useNavigate();\r\n\r\n  const handleRequest = async () => {\r\n    if (!user) {\r\n      alert('Please log in to request a book.');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    try {\r\n      await axios.post('http://localhost:5000/api/requests', \r\n        { bookId: book._id },\r\n        { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` } }\r\n      );\r\n      onRequest();\r\n    } catch (error) {\r\n      console.error('Error creating request:', error);\r\n      alert('Failed to request book. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    if (!user) {\r\n      alert('Please log in to delete a book.');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    onDelete(book._id);\r\n  };\r\n\r\n  return (\r\n    <div className=\"book-card\">\r\n      {book.image && <img src={book.image} alt={book.title} />}\r\n      <h3>{book.title}</h3>\r\n      <p>Author: {book.author}</p>\r\n      <p>Condition: {book.condition}</p>\r\n      <p>Posted by: {book.user.username}</p>\r\n      {user && user.id !== book.user._id && (\r\n        <button className=\"button\" onClick={handleRequest}>Request Book</button>\r\n      )}\r\n      {user && user.id === book.user._id && (\r\n        <button className=\"button\" onClick={handleDelete}>Delete</button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BookCard;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,QAAS,CAAAC,QAAQA,CAAAC,IAAA,CAAsC,IAArC,CAAEC,IAAI,CAAEC,IAAI,CAAEC,SAAS,CAAEC,QAAS,CAAC,CAAAJ,IAAA,CACnD,KAAM,CAAAK,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAY,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CAACJ,IAAI,CAAE,CACTK,KAAK,CAAC,kCAAkC,CAAC,CACzCF,QAAQ,CAAC,QAAQ,CAAC,CAClB,OACF,CACA,GAAI,CACF,KAAM,CAAAZ,KAAK,CAACe,IAAI,CAAC,oCAAoC,CACnD,CAAEC,MAAM,CAAER,IAAI,CAACS,GAAI,CAAC,CACpB,CAAEC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAG,CAAE,CAC1E,CAAC,CACDZ,SAAS,CAAC,CAAC,CACb,CAAE,MAAOa,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CT,KAAK,CAAC,2CAA2C,CAAC,CACpD,CACF,CAAC,CAED,KAAM,CAAAW,YAAY,CAAGA,CAAA,GAAM,CACzB,GAAI,CAAChB,IAAI,CAAE,CACTK,KAAK,CAAC,iCAAiC,CAAC,CACxCF,QAAQ,CAAC,QAAQ,CAAC,CAClB,OACF,CACAD,QAAQ,CAACH,IAAI,CAACS,GAAG,CAAC,CACpB,CAAC,CAED,mBACEZ,KAAA,QAAKqB,SAAS,CAAC,WAAW,CAAAC,QAAA,EACvBnB,IAAI,CAACoB,KAAK,eAAIzB,IAAA,QAAK0B,GAAG,CAAErB,IAAI,CAACoB,KAAM,CAACE,GAAG,CAAEtB,IAAI,CAACuB,KAAM,CAAE,CAAC,cACxD5B,IAAA,OAAAwB,QAAA,CAAKnB,IAAI,CAACuB,KAAK,CAAK,CAAC,cACrB1B,KAAA,MAAAsB,QAAA,EAAG,UAAQ,CAACnB,IAAI,CAACwB,MAAM,EAAI,CAAC,cAC5B3B,KAAA,MAAAsB,QAAA,EAAG,aAAW,CAACnB,IAAI,CAACyB,SAAS,EAAI,CAAC,cAClC5B,KAAA,MAAAsB,QAAA,EAAG,aAAW,CAACnB,IAAI,CAACC,IAAI,CAACyB,QAAQ,EAAI,CAAC,CACrCzB,IAAI,EAAIA,IAAI,CAAC0B,EAAE,GAAK3B,IAAI,CAACC,IAAI,CAACQ,GAAG,eAChCd,IAAA,WAAQuB,SAAS,CAAC,QAAQ,CAACU,OAAO,CAAEvB,aAAc,CAAAc,QAAA,CAAC,cAAY,CAAQ,CACxE,CACAlB,IAAI,EAAIA,IAAI,CAAC0B,EAAE,GAAK3B,IAAI,CAACC,IAAI,CAACQ,GAAG,eAChCd,IAAA,WAAQuB,SAAS,CAAC,QAAQ,CAACU,OAAO,CAAEX,YAAa,CAAAE,QAAA,CAAC,QAAM,CAAQ,CACjE,EACE,CAAC,CAEV,CAEA,cAAe,CAAArB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}