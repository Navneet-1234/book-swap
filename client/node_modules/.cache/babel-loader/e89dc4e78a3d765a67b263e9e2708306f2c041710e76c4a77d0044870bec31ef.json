{"ast":null,"code":"import _objectSpread from\"D:/book-swap/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BookForm(_ref){let{onBookAdded}=_ref;const[formData,setFormData]=useState({title:'',author:'',condition:'Good',image:''});const navigate=useNavigate();const user=JSON.parse(localStorage.getItem('user'));const handleSubmit=async e=>{e.preventDefault();if(!user){alert('Please log in to add a book.');navigate('/login');return;}try{await axios.post('http://localhost:5000/api/books',formData,{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});onBookAdded();setFormData({title:'',author:'',condition:'Good',image:''});}catch(error){console.error('Error adding book:',error);alert('Failed to add book. Please try again.');}};const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};return/*#__PURE__*/_jsxs(\"form\",{className:\"form-container\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add New Book\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:formData.title,onChange:handleChange,placeholder:\"Book Title\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"author\",value:formData.author,onChange:handleChange,placeholder:\"Author\",required:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"condition\",value:formData.condition,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Like New\",children:\"Like New\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Good\",children:\"Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Fair\",children:\"Fair\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"image\",value:formData.image,onChange:handleChange,placeholder:\"Image URL (optional)\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button\",children:\"Add Book\"})]});}export default BookForm;","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","BookForm","_ref","onBookAdded","formData","setFormData","title","author","condition","image","navigate","user","JSON","parse","localStorage","getItem","handleSubmit","e","preventDefault","alert","post","headers","Authorization","concat","error","console","handleChange","_objectSpread","target","name","value","className","onSubmit","children","type","onChange","placeholder","required"],"sources":["D:/book-swap/client/src/components/BookForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction BookForm({ onBookAdded }) {\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    author: '',\r\n    condition: 'Good',\r\n    image: ''\r\n  });\r\n  const navigate = useNavigate();\r\n  const user = JSON.parse(localStorage.getItem('user'));\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!user) {\r\n      alert('Please log in to add a book.');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    try {\r\n      await axios.post('http://localhost:5000/api/books', formData, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n      });\r\n      onBookAdded();\r\n      setFormData({ title: '', author: '', condition: 'Good', image: '' });\r\n    } catch (error) {\r\n      console.error('Error adding book:', error);\r\n      alert('Failed to add book. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  return (\r\n    <form className=\"form-container\" onSubmit={handleSubmit}>\r\n      <h2>Add New Book</h2>\r\n      <input\r\n        type=\"text\"\r\n        name=\"title\"\r\n        value={formData.title}\r\n        onChange={handleChange}\r\n        placeholder=\"Book Title\"\r\n        required\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        name=\"author\"\r\n        value={formData.author}\r\n        onChange={handleChange}\r\n        placeholder=\"Author\"\r\n        required\r\n      />\r\n      <select name=\"condition\" value={formData.condition} onChange={handleChange}>\r\n        <option value=\"Like New\">Like New</option>\r\n        <option value=\"Good\">Good</option>\r\n        <option value=\"Fair\">Fair</option>\r\n      </select>\r\n      <input\r\n        type=\"text\"\r\n        name=\"image\"\r\n        value={formData.image}\r\n        onChange={handleChange}\r\n        placeholder=\"Image URL (optional)\"\r\n      />\r\n      <button type=\"submit\" className=\"button\">Add Book</button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default BookForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}